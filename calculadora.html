<body>

<h1>Calculadora</h1>

<p>Teste: <span id="teste"></span></p>

<span>Sexo<span/>
<input type="radio" name="gender" value="F" checked> Feminino
<input type="radio" name="gender" value="M"> Masculino<br>
<span>Idade</span>
<input type="number" id="age" min="16" max="120"><br>
<span>Contribuição</span>
<input type="number" id="contribution" min="0" max="104"><br>
<span>Setor<span/>
<input type="radio" name="sector" value="PRIVATE" checked> Privado
<input type="radio" name="sector" value="PUBLIC"> Público<br><br>
<input type="button" value="Submit" onclick="initialize()">


<p>Novas Regras: <span id="new"></span></p>
<span id="new_value"></span>
<p>Regras Atuais: <span id="old"></span></p>
<span id="old_value"></span>

<script>
function initialize (){
  var gender_input = document.querySelector('input[name="gender"]:checked').value;
  var age_input = document.getElementById('age').value;
  var contribution_input = document.getElementById('contribution').value;
  var sector_input = document.querySelector('input[name="sector"]:checked').value;
  var result_old = calculadoraOld(gender_input, age_input, contribution_input, sector_input);
  var result_new = calculadoraNew(gender_input, age_input, contribution_input);
  message("new_value", result_new);
  message("old_value", result_old);
}

function newRules(gender, age) {

 if((gender == "F") && (age <=45) || (gender == "M") && (age <=50)){
   return "new";
 }
 else {
   return "old";
 }
}

function oldRules(service, gender) {
  if(service == "PUBLIC"){
    if (gender == "F") {
      return "public_woman";
    }
    else if (gender == "M") {
      return "public_man";
    }
  }
  else{
    if (gender == "F") {
      return "private_woman";
    }
    else if (gender == "M") {
      return "private_man";
    }
  }
}

function calculateNewRules(age, contribution) {
  var age_time = 65 - age;
  var contribution_time = 25 - contribution;
  var time_left = Math.max(age_time, contribution_time);
  return time_left;
};

function calculatePublicOldRulesWoman(age, contribution) {
  var age_time = 55 - age;
  var contribution_time = 30 - contribution;
  var time_left = Math.max(age_time, contribution_time);
  return time_left;
};

function calculatePublicOldRulesMan(age, contribution) {
  var age_time = 60 - age;
  var contribution_time = 35 - contribution;
  var time_left = Math.max(age_time, contribution_time);
  return time_left;
};

function calculatePrivateOldRulesWoman(age, contribution) {
  var age_time = 60 - age;
  var age_contribution_time = 15 - contribution;
  var contribution_time = 30 - contribution;
  var age_time_left = Math.max(age_time, age_contribution_time);
  var time_left = Math.min(age_time_left, contribution_time);
  return time_left;
};

function calculatePrivateOldRulesMan(age, contribution) {
  var age_time = 65 - age;
  var age_contribution_time = 15 - contribution;
  var contribution_time = 35 - contribution;
  var age_time_left = Math.max(age_time, age_contribution_time);
  var time_left = Math.min(age_time_left, contribution_time);
  return time_left;
};

function calculadoraNew(gender, age, contribution) {
 var rules = newRules(gender, age);

 if (rules == "new") {
   var result_new = calculateNewRules(age, contribution);
 }
 else {

   var partial = calculadoraOld(age, contribution);
   var result_new = (1.5 * partial);
 }

 return result_new;

};

function calculadoraOld(gender, age, contribution, service) {
console.log("aqui " + gender + " " + age + " " + contribution + " " + service);
 var rules = oldRules(service, gender);

 if (rules == "public_woman") {
   var result_old = calculatePublicOldRulesWoman(age, contribution);
 }
 else if (rules == "public_man") {
   var result_old = calculatePublicOldRulesMan(age, contribution);
 }
 else if (rules == "private_woman") {
   var result_old = calculatePrivateOldRulesWoman(age, contribution);
 }
 else if (rules == "private_man") {
   var result_old = calculatePrivateOldRulesMan(age, contribution);
 }

 return result_old;
};

function message(element, text){
  document.getElementById(element).innerText = text;
};

</script>


</body>
